<!doctype html><html data-reactroot="" data-reactid="1" data-react-checksum="-715750265"><head data-reactid="2"><meta charset="utf-8" data-reactid="3"/><title data-reactid="4">React DnD</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" data-reactid="5"/><link rel="stylesheet" type="text/css" href="main-9f1a830a720ad13e659f.css" data-reactid="6"/><base target="_blank" data-reactid="7"/></head><body data-reactid="8"><div data-reactid="9"><header class="Header" data-reactid="10"><div class="NavBar" data-reactid="11"><div class="NavBar-container" data-reactid="12"><div class="NavBar-logo" data-reactid="13"><a href="./" target="_self" class="NavBar-logoTitle" data-reactid="14"><!-- react-text: 15 -->React <!-- /react-text --><i data-reactid="16">DnD</i></a><p class="NavBar-logoDescription" data-reactid="17">Drag and Drop for React</p></div><div class="NavBar-item" data-reactid="18"><a class="NavBar-link" href="docs-overview.html" target="_self" data-reactid="19">Docs</a><a class="NavBar-link" href="examples-chessboard-tutorial-app.html" target="_self" data-reactid="20">Examples</a><a class="NavBar-link" href="https://github.com/react-dnd/react-dnd" data-reactid="21">GitHub</a></div></div></div></header><div class="PageBody PageBody--hasSidebar" data-reactid="22"><div class="PageBody-container" data-reactid="23"><div class="SideBar" data-reactid="24"><div class="SideBar-content" data-reactid="25"><div class="SideBar-group" data-reactid="26"><h4 class="SideBar-groupTitle" data-reactid="27">Quick Start</h4><a href="docs-overview.html" target="_self" class="SideBar-item" data-reactid="28"><span class="SideBar-itemText" data-reactid="29">Overview</span><span class="arrowBullet" data-reactid="30"></span></a><a href="docs-tutorial.html" target="_self" class="SideBar-item" data-reactid="31"><span class="SideBar-itemText" data-reactid="32">Tutorial</span><span class="arrowBullet" data-reactid="33"></span></a><a href="docs-testing.html" target="_self" class="SideBar-item SideBar-item--selected" data-reactid="34"><span class="SideBar-itemText" data-reactid="35">Testing</span><span class="arrowBullet" data-reactid="36"></span></a><a href="docs-faq.html" target="_self" class="SideBar-item" data-reactid="37"><span class="SideBar-itemText" data-reactid="38">FAQ</span><span class="arrowBullet" data-reactid="39"></span></a><a href="docs-troubleshooting.html" target="_self" class="SideBar-item" data-reactid="40"><span class="SideBar-itemText" data-reactid="41">Troubleshooting</span><span class="arrowBullet" data-reactid="42"></span></a></div><div class="SideBar-group" data-reactid="43"><h4 class="SideBar-groupTitle" data-reactid="44">Top-Level API</h4><a href="docs-drag-source.html" target="_self" class="SideBar-item" data-reactid="45"><span class="SideBar-itemText" data-reactid="46">DragSource</span><span class="arrowBullet" data-reactid="47"></span></a><a href="docs-drop-target.html" target="_self" class="SideBar-item" data-reactid="48"><span class="SideBar-itemText" data-reactid="49">DropTarget</span><span class="arrowBullet" data-reactid="50"></span></a><a href="docs-drag-layer.html" target="_self" class="SideBar-item" data-reactid="51"><span class="SideBar-itemText" data-reactid="52">DragLayer</span><span class="arrowBullet" data-reactid="53"></span></a><a href="docs-drag-drop-context.html" target="_self" class="SideBar-item" data-reactid="54"><span class="SideBar-itemText" data-reactid="55">DragDropContext</span><span class="arrowBullet" data-reactid="56"></span></a><a href="docs-drag-drop-context-provider.html" target="_self" class="SideBar-item" data-reactid="57"><span class="SideBar-itemText" data-reactid="58">DragDropContextProvider</span><span class="arrowBullet" data-reactid="59"></span></a></div><div class="SideBar-group" data-reactid="60"><h4 class="SideBar-groupTitle" data-reactid="61">Connecting to DOM</h4><a href="docs-drag-source-connector.html" target="_self" class="SideBar-item" data-reactid="62"><span class="SideBar-itemText" data-reactid="63">DragSourceConnector</span><span class="arrowBullet" data-reactid="64"></span></a><a href="docs-drop-target-connector.html" target="_self" class="SideBar-item" data-reactid="65"><span class="SideBar-itemText" data-reactid="66">DropTargetConnector</span><span class="arrowBullet" data-reactid="67"></span></a></div><div class="SideBar-group" data-reactid="68"><h4 class="SideBar-groupTitle" data-reactid="69">Monitoring State</h4><a href="docs-drag-source-monitor.html" target="_self" class="SideBar-item" data-reactid="70"><span class="SideBar-itemText" data-reactid="71">DragSourceMonitor</span><span class="arrowBullet" data-reactid="72"></span></a><a href="docs-drop-target-monitor.html" target="_self" class="SideBar-item" data-reactid="73"><span class="SideBar-itemText" data-reactid="74">DropTargetMonitor</span><span class="arrowBullet" data-reactid="75"></span></a><a href="docs-drag-layer-monitor.html" target="_self" class="SideBar-item" data-reactid="76"><span class="SideBar-itemText" data-reactid="77">DragLayerMonitor</span><span class="arrowBullet" data-reactid="78"></span></a></div><div class="SideBar-group" data-reactid="79"><h4 class="SideBar-groupTitle" data-reactid="80">Backends</h4><a href="docs-html5-backend.html" target="_self" class="SideBar-item" data-reactid="81"><span class="SideBar-itemText" data-reactid="82">HTML5</span><span class="arrowBullet" data-reactid="83"></span></a><a href="docs-test-backend.html" target="_self" class="SideBar-item" data-reactid="84"><span class="SideBar-itemText" data-reactid="85">Test</span><span class="arrowBullet" data-reactid="86"></span></a></div></div></div><div style="width:100%;" data-reactid="87"><div style="width:100%;" data-reactid="88"><p><em>New to React DnD? <a href="docs-overview.html">Read the overview</a> before jumping into the docs.</em></p>
<h1>Testing<a id="testing">&nbsp;</a></h1><p>React DnD is test-friendly. The whole drag and drop interaction, including the rendering of your components, as well as the side effects you perform in response to the drag and drop events, can be tested.</p>
<p>There are several different approaches to testing React components. React DnD is not opinionated and lets you use either of them. <strong>Neither of those approaches require the browser event system to be available.</strong></p>
<p>A few test examples are included with the React DnD inside its <code>examples</code> folder. Run <code>yarn install</code> and <code>yarn test</code> inside the <code>react-dnd</code> root folder to start them.</p>
<h3>Testing the Components in Isolation<a id="testing-the-components-in-isolation">&nbsp;</a></h3><p>If you are only interested in testing the <em>rendering</em> of your components in isolation, and not their interaction, you may use the <code>DecoratedComponent</code> static property available on any class wrapped with React DnD to access the original class. You may then test it with the different props without any dependency on React DnD, supplying an identity function to stub the connector methods.</p>
</div><div class="CodeBlock" data-reactid="89"><ul class="CodeBlock-tabs" data-reactid="90"><li class="CodeBlock-tab CodeBlock-activeTab" data-reactid="91"><a data-reactid="92">ES6</a></li><li class="CodeBlock-tab " data-reactid="93"><a data-reactid="94">ES5</a></li></ul><div class="CodeBlock-content" data-reactid="95"><div style="width:100%;" data-reactid="96"><div style="width:100%;" data-reactid="97">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span> from <span class="token string" >'react-addons-test-utils'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> expect from <span class="token string" >'expect'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Box</span> from <span class="token string" >'./components/Box'</span><span class="token punctuation" >;</span>

<span class="token function" >it<span class="token punctuation" >(</span></span><span class="token string" >'can be tested independently'</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Obtain the reference to the component before React DnD wrapping
</span>  <span class="token keyword" >const</span> <span class="token qualifier" >Original</span><span class="token qualifier" >Box</span> <span class="token operator" >=</span> <span class="token qualifier" >Box</span><span class="token punctuation" >.</span><span class="token qualifier" >Decorated</span><span class="token qualifier" >Component</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Stub the React DnD connector functions with an identity function
</span>  <span class="token keyword" >const</span> identity <span class="token operator" >=</span> el <span class="token operator" >=</span><span class="token operator" >></span> el<span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Render with one set of props and test
</span>  <span class="token keyword" >let</span> root <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >renderIntoDocument<span class="token punctuation" >(</span></span>
    <span class="token operator" >&lt;</span><span class="token qualifier" >Original</span><span class="token qualifier" >Box</span> name<span class="token operator" >=</span><span class="token string" >'test'</span>
                 connectDragSource<span class="token operator" >=</span><span class="token punctuation" >{</span>identity<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword" >let</span> div <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >findRenderedDOMComponentWithTag<span class="token punctuation" >(</span></span>root<span class="token punctuation" >,</span> <span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token function" >expect<span class="token punctuation" >(</span></span>div<span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>style<span class="token punctuation" >.</span>opacity<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual<span class="token punctuation" >(</span></span><span class="token number" >1</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Render with another set of props and test
</span>  root <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >renderIntoDocument<span class="token punctuation" >(</span></span>
    <span class="token operator" >&lt;</span><span class="token qualifier" >Original</span><span class="token qualifier" >Box</span> name<span class="token operator" >=</span><span class="token string" >'test'</span>
                 connectDragSource<span class="token operator" >=</span><span class="token punctuation" >{</span>identity<span class="token punctuation" >}</span>
                 isDragging <span class="token operator" >/</span><span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  div <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >findRenderedDOMComponentWithTag<span class="token punctuation" >(</span></span>root<span class="token punctuation" >,</span> <span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token function" >expect<span class="token punctuation" >(</span></span>div<span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>style<span class="token punctuation" >.</span>opacity<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual<span class="token punctuation" >(</span></span><span class="token number" >0.4</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></div></div></div></div><div style="width:100%;" data-reactid="98">
<h3>Testing the Drag and Drop Interaction<a id="testing-the-drag-and-drop-interaction">&nbsp;</a></h3><p>If you want to test the whole interaction, and not just the individual component rendering, you should use the <a href="docs-test-backend.html">test backend</a>. <strong>The test backend does not require the DOM</strong> so you can also use it with <a href="https://facebook.github.io/react/docs/test-utils.html#shallow-rendering"><code>ReactShallowRenderer</code></a> just fine.</p>
<p>This is currently the least documented part of React DnD because it exposes the underlying concepts from the <a href="https://github.com/react-dnd/dnd-core">DnD Core</a>, the library powering React DnD inside. You can learn more about the test backend and its methods from the <a href="https://github.com/react-dnd/dnd-core/tree/v1.1.0/src/__tests__">DnD Core tests</a>.</p>
<p>First, you need to install the test backend:</p>
<code class="codeBlock">npm install <span class="token operator" >--</span>save<span class="token operator" >-</span>dev react<span class="token operator" >-</span>dnd<span class="token operator" >-</span>test<span class="token operator" >-</span>backend</code><p>Here is an example to get you started:</p>
</div><div class="CodeBlock" data-reactid="99"><ul class="CodeBlock-tabs" data-reactid="100"><li class="CodeBlock-tab CodeBlock-activeTab" data-reactid="101"><a data-reactid="102">ES7</a></li><li class="CodeBlock-tab " data-reactid="103"><a data-reactid="104">ES6</a></li><li class="CodeBlock-tab " data-reactid="105"><a data-reactid="106">ES5</a></li></ul><div class="CodeBlock-content" data-reactid="107"><div style="width:100%;" data-reactid="108"><div style="width:100%;" data-reactid="109">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Component</span> <span class="token punctuation" >}</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Backend</span> from <span class="token string" >'react-dnd-test-backend'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Drop</span><span class="token qualifier" >Context</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span> from <span class="token string" >'react-addons-test-utils'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> expect from <span class="token string" >'expect'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">/**
 * Wraps a component into a DragDropContext that uses the TestBackend.
 */</span>
<span class="token block-keyword" >function</span> <span class="token function" >wrapInTestContext<span class="token punctuation" >(</span></span><span class="token qualifier" >Decorated</span><span class="token qualifier" >Component</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  @<span class="token function" >DragDropContext<span class="token punctuation" >(</span></span><span class="token qualifier" >Test</span><span class="token qualifier" >Backend</span><span class="token punctuation" >)</span>
  <span class="token keyword" >class</span> <span class="token class-name" >TestContextContainer</span> <span class="token keyword" >extends</span> <span class="token class-name" >Component</span> <span class="token punctuation" >{</span>
    <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token operator" >&lt;</span><span class="token qualifier" >Decorated</span><span class="token qualifier" >Component</span> <span class="token punctuation" >{</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >return</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Context</span><span class="token qualifier" >Container</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

<span class="token function" >it<span class="token punctuation" >(</span></span><span class="token string" >'can be tested with the testing backend'</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Render with the test context that uses the test backend
</span>  <span class="token keyword" >const</span> <span class="token qualifier" >Box</span><span class="token qualifier" >Context</span> <span class="token operator" >=</span> <span class="token function" >wrapInTestContext<span class="token punctuation" >(</span></span><span class="token qualifier" >Box</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> root <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >renderIntoDocument<span class="token punctuation" >(</span></span><span class="token operator" >&lt;</span><span class="token qualifier" >Box</span><span class="token qualifier" >Context</span> name<span class="token operator" >=</span><span class="token string" >'test'</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Obtain a reference to the backend
</span>  <span class="token keyword" >const</span> backend <span class="token operator" >=</span> root<span class="token punctuation" >.</span><span class="token function" >getManager<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >getBackend<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Test that the opacity is 1
</span>  <span class="token keyword" >let</span> div <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >findRenderedDOMComponentWithTag<span class="token punctuation" >(</span></span>root<span class="token punctuation" >,</span> <span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token function" >expect<span class="token punctuation" >(</span></span>div<span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>style<span class="token punctuation" >.</span>opacity<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual<span class="token punctuation" >(</span></span><span class="token number" >1</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Find the drag source ID and use it to simulate the dragging operation
</span>  <span class="token keyword" >const</span> box <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >findRenderedComponentWithType<span class="token punctuation" >(</span></span>root<span class="token punctuation" >,</span> <span class="token qualifier" >Box</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  backend<span class="token punctuation" >.</span><span class="token function" >simulateBeginDrag<span class="token punctuation" >(</span></span><span class="token punctuation" >[</span>box<span class="token punctuation" >.</span><span class="token function" >getHandlerId<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// Verify that the div changed its opacity
</span>  div <span class="token operator" >=</span> <span class="token qualifier" >Test</span><span class="token qualifier" >Utils</span><span class="token punctuation" >.</span><span class="token function" >findRenderedDOMComponentWithTag<span class="token punctuation" >(</span></span>root<span class="token punctuation" >,</span> <span class="token string" >'div'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token function" >expect<span class="token punctuation" >(</span></span>div<span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>style<span class="token punctuation" >.</span>opacity<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual<span class="token punctuation" >(</span></span><span class="token number" >0.4</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>

  <span class="token comment" spellcheck="true">// See other backend.simulate* methods for more!
</span><span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span></code></div></div></div></div><div style="width:100%;" data-reactid="110">
</div></div></div></div></div><script data-reactid="111">window.INITIAL_PROPS = {"location":"docs-testing.html","devMode":false,"files":{"main.css":"main-9f1a830a720ad13e659f.css","main.js":"main-9f1a830a720ad13e659f.js"}};
</script><script src="main-9f1a830a720ad13e659f.js" data-reactid="112"></script></body></html>