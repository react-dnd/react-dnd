<!doctype html><html data-reactroot="" data-reactid="1" data-react-checksum="-1374644195"><head data-reactid="2"><meta charset="utf-8" data-reactid="3"/><title data-reactid="4">React DnD</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" data-reactid="5"/><link rel="stylesheet" type="text/css" href="main-0dd4237c1570a3f41afd.css" data-reactid="6"/><base target="_blank" data-reactid="7"/></head><body data-reactid="8"><div data-reactid="9"><header class="Header" data-reactid="10"><div class="NavBar" data-reactid="11"><div class="NavBar-container" data-reactid="12"><div class="NavBar-logo" data-reactid="13"><a href="./" target="_self" class="NavBar-logoTitle" data-reactid="14"><!-- react-text: 15 -->React <!-- /react-text --><i data-reactid="16">DnD</i></a><p class="NavBar-logoDescription" data-reactid="17">Drag and Drop for React</p></div><div class="NavBar-item" data-reactid="18"><a class="NavBar-link" href="docs-overview.html" target="_self" data-reactid="19">Docs</a><a class="NavBar-link" href="examples-chessboard-tutorial-app.html" target="_self" data-reactid="20">Examples</a><a class="NavBar-link" href="https://github.com/react-dnd/react-dnd" data-reactid="21">GitHub</a></div></div></div></header><div class="PageBody PageBody--hasSidebar" data-reactid="22"><div class="PageBody-container" data-reactid="23"><div class="SideBar" data-reactid="24"><div class="SideBar-content" data-reactid="25"><div class="SideBar-group" data-reactid="26"><h4 class="SideBar-groupTitle" data-reactid="27">Quick Start</h4><a href="docs-overview.html" target="_self" class="SideBar-item" data-reactid="28"><span class="SideBar-itemText" data-reactid="29">Overview</span><span class="arrowBullet" data-reactid="30"></span></a><a href="docs-tutorial.html" target="_self" class="SideBar-item" data-reactid="31"><span class="SideBar-itemText" data-reactid="32">Tutorial</span><span class="arrowBullet" data-reactid="33"></span></a><a href="docs-testing.html" target="_self" class="SideBar-item" data-reactid="34"><span class="SideBar-itemText" data-reactid="35">Testing</span><span class="arrowBullet" data-reactid="36"></span></a><a href="docs-faq.html" target="_self" class="SideBar-item" data-reactid="37"><span class="SideBar-itemText" data-reactid="38">FAQ</span><span class="arrowBullet" data-reactid="39"></span></a><a href="docs-troubleshooting.html" target="_self" class="SideBar-item" data-reactid="40"><span class="SideBar-itemText" data-reactid="41">Troubleshooting</span><span class="arrowBullet" data-reactid="42"></span></a></div><div class="SideBar-group" data-reactid="43"><h4 class="SideBar-groupTitle" data-reactid="44">Top-Level API</h4><a href="docs-drag-source.html" target="_self" class="SideBar-item" data-reactid="45"><span class="SideBar-itemText" data-reactid="46">DragSource</span><span class="arrowBullet" data-reactid="47"></span></a><a href="docs-drop-target.html" target="_self" class="SideBar-item" data-reactid="48"><span class="SideBar-itemText" data-reactid="49">DropTarget</span><span class="arrowBullet" data-reactid="50"></span></a><a href="docs-drag-layer.html" target="_self" class="SideBar-item SideBar-item--selected" data-reactid="51"><span class="SideBar-itemText" data-reactid="52">DragLayer</span><span class="arrowBullet" data-reactid="53"></span></a><a href="docs-drag-drop-context.html" target="_self" class="SideBar-item" data-reactid="54"><span class="SideBar-itemText" data-reactid="55">DragDropContext</span><span class="arrowBullet" data-reactid="56"></span></a><a href="docs-drag-drop-context-provider.html" target="_self" class="SideBar-item" data-reactid="57"><span class="SideBar-itemText" data-reactid="58">DragDropContextProvider</span><span class="arrowBullet" data-reactid="59"></span></a></div><div class="SideBar-group" data-reactid="60"><h4 class="SideBar-groupTitle" data-reactid="61">Connecting to DOM</h4><a href="docs-drag-source-connector.html" target="_self" class="SideBar-item" data-reactid="62"><span class="SideBar-itemText" data-reactid="63">DragSourceConnector</span><span class="arrowBullet" data-reactid="64"></span></a><a href="docs-drop-target-connector.html" target="_self" class="SideBar-item" data-reactid="65"><span class="SideBar-itemText" data-reactid="66">DropTargetConnector</span><span class="arrowBullet" data-reactid="67"></span></a></div><div class="SideBar-group" data-reactid="68"><h4 class="SideBar-groupTitle" data-reactid="69">Monitoring State</h4><a href="docs-drag-source-monitor.html" target="_self" class="SideBar-item" data-reactid="70"><span class="SideBar-itemText" data-reactid="71">DragSourceMonitor</span><span class="arrowBullet" data-reactid="72"></span></a><a href="docs-drop-target-monitor.html" target="_self" class="SideBar-item" data-reactid="73"><span class="SideBar-itemText" data-reactid="74">DropTargetMonitor</span><span class="arrowBullet" data-reactid="75"></span></a><a href="docs-drag-layer-monitor.html" target="_self" class="SideBar-item" data-reactid="76"><span class="SideBar-itemText" data-reactid="77">DragLayerMonitor</span><span class="arrowBullet" data-reactid="78"></span></a></div><div class="SideBar-group" data-reactid="79"><h4 class="SideBar-groupTitle" data-reactid="80">Backends</h4><a href="docs-html5-backend.html" target="_self" class="SideBar-item" data-reactid="81"><span class="SideBar-itemText" data-reactid="82">HTML5</span><span class="arrowBullet" data-reactid="83"></span></a><a href="docs-test-backend.html" target="_self" class="SideBar-item" data-reactid="84"><span class="SideBar-itemText" data-reactid="85">Test</span><span class="arrowBullet" data-reactid="86"></span></a></div></div></div><div style="width:100%;" data-reactid="87"><div style="width:100%;" data-reactid="88"><p><em>New to React DnD? <a href="docs-overview.html">Read the overview</a> before jumping into the docs.</em></p>
<h1>DragLayer<a id="draglayer">&nbsp;</a></h1><p><strong>This is an advanced feature.</strong>  </p>
<p>For the most use cases, the default rendering of the <a href="docs-html5-backend.html">HTML5 backend</a> should suffice. However, its drag preview has certain limitations. For example, it has to be an existing node screenshot or an image, and it cannot change midflight.</p>
<p>Sometimes you might want to perform the custom rendering. This also becomes necessary if you&#39;re using a custom backend. <code>DragLayer</code> lets you perform the rendering of the drag preview yourself using just the React components. It is a higher-order component accepting one required parameter that is described below.</p>
<p>To use <code>DragLayer</code>, don&#39;t forget to wrap the top-level component of your app in a <a href="docs-drag-drop-context.html"><code>DragDropContext</code></a>.</p>
<h3>Signature<a id="signature">&nbsp;</a></h3><p><code>DragLayer</code> uses partial application. After specifying its only parameter with the first call, you need to pass your React component class as the only parameter in the second call. This signature makes <code>DragLayer</code> usable as an ES7 decorator. Read the <a href="docs-overview.html">overview</a> for a more detailed explanation of the decorators and the higher-order components.</p>
</div><div class="CodeBlock" data-reactid="89"><ul class="CodeBlock-tabs" data-reactid="90"><li class="CodeBlock-tab CodeBlock-activeTab" data-reactid="91"><a data-reactid="92">ES7</a></li><li class="CodeBlock-tab " data-reactid="93"><a data-reactid="94">ES6</a></li><li class="CodeBlock-tab " data-reactid="95"><a data-reactid="96">ES5</a></li></ul><div class="CodeBlock-content" data-reactid="97"><div style="width:100%;" data-reactid="98"><div style="width:100%;" data-reactid="99">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Layer</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

@<span class="token function" >DragLayer<span class="token punctuation" >(</span></span>collect<span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >CustomDragLayer</span> <span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">/* ... */</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%;" data-reactid="100">
<h3>Parameters<a id="parameters">&nbsp;</a></h3><ul>
<li><p><strong><code>collect</code></strong>: Required. The collecting function. It should return a plain object of the props to inject into your component. It receives a single <code>monitor</code> parameter. Read the <a href="docs-overview.html">overview</a> for an introduction to the monitors and the collecting function. See the collecting function described in detail in the next section.</p>
</li>
<li><p><strong><code>options</code></strong>: Optional. A plain object. If some of the props to your component are not scalar (that is, are not primitive values or functions), specifying a custom <code>arePropsEqual(props, otherProps)</code> function inside the <code>options</code> object can improve the performance. Unless you have performance problems, don&#39;t worry about it.</p>
</li>
</ul>
<h3>The Collecting Function<a id="the-collecting-function">&nbsp;</a></h3><p>The collecting function signature is similar to the collecting functions of <a href="docs-drag-source.html"><code>DragSource</code></a> and <a href="docs-drop-target.html"><code>DropTarget</code></a>, except that it doesn&#39;t have a <code>connect</code> parameter because the drag layer is not interactive and only <em>reflects</em> the drag state. The collecting function is called any time the global drag state changes, including the coordinate changes, so that your component can provide a timely updated custom drag preview. You can ask the <code>monitor</code> for the client coordinates of the dragged item.</p>
<h4>Parameters<a id="parameters">&nbsp;</a></h4><ul>
<li><strong><code>monitor</code></strong>: An instance of <a href="docs-drag-layer-monitor.html"><code>DragLayerMonitor</code></a>. You can use it to query the information about the current drag state, including the coordinates. Read the <a href="docs-drag-layer-monitor.html"><code>DragLayerMonitor</code> documentation</a> for a complete list of <code>monitor</code> methods, or read the <a href="docs-overview.html">overview</a> for an introduction to the monitors.</li>
</ul>
<h3>Return Value<a id="return-value">&nbsp;</a></h3><p><code>DragLayer</code> wraps your component and returns another React component.<br/>For easier <a href="docs-testing.html">testing</a>, it provides an API to reach into the internals:</p>
<h4>Static Properties<a id="static-properties">&nbsp;</a></h4><ul>
<li><strong><code>DecoratedComponent</code></strong>: Returns the wrapped component type.</li>
</ul>
<h4>Instance Methods<a id="instance-methods">&nbsp;</a></h4><ul>
<li><strong><code>getDecoratedComponentInstance()</code></strong>: Returns the wrapped component instance.</li>
</ul>
<h3>Example<a id="example">&nbsp;</a></h3></div><div class="CodeBlock" data-reactid="101"><ul class="CodeBlock-tabs" data-reactid="102"><li class="CodeBlock-tab CodeBlock-activeTab" data-reactid="103"><a data-reactid="104">ES7</a></li><li class="CodeBlock-tab " data-reactid="105"><a data-reactid="106">ES6</a></li><li class="CodeBlock-tab " data-reactid="107"><a data-reactid="108">ES5</a></li></ul><div class="CodeBlock-content" data-reactid="109"><div style="width:100%;" data-reactid="110"><div style="width:100%;" data-reactid="111">
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span> from <span class="token string" >'prop-types'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Item</span><span class="token qualifier" >Types</span> from <span class="token string" >'./ItemTypes'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Box</span><span class="token qualifier" >Drag</span><span class="token qualifier" >Preview</span> from <span class="token string" >'./BoxDragPreview'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span> <span class="token qualifier" >Drag</span><span class="token qualifier" >Layer</span> <span class="token punctuation" >}</span> from <span class="token string" >'react-dnd'</span><span class="token punctuation" >;</span>

<span class="token keyword" >const</span> layerStyles <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  position<span class="token punctuation" >:</span> <span class="token string" >'fixed'</span><span class="token punctuation" >,</span>
  pointerEvents<span class="token punctuation" >:</span> <span class="token string" >'none'</span><span class="token punctuation" >,</span>
  zIndex<span class="token punctuation" >:</span> <span class="token number" >100</span><span class="token punctuation" >,</span>
  left<span class="token punctuation" >:</span> <span class="token number" >0</span><span class="token punctuation" >,</span>
  top<span class="token punctuation" >:</span> <span class="token number" >0</span><span class="token punctuation" >,</span>
  width<span class="token punctuation" >:</span> <span class="token string" >'100%'</span><span class="token punctuation" >,</span>
  height<span class="token punctuation" >:</span> <span class="token string" >'100%'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>

<span class="token block-keyword" >function</span> <span class="token function" >getItemStyles<span class="token punctuation" >(</span></span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >const</span> <span class="token punctuation" >{</span> currentOffset <span class="token punctuation" >}</span> <span class="token operator" >=</span> props<span class="token punctuation" >;</span>
  <span class="token block-keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>currentOffset<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
      display<span class="token punctuation" >:</span> <span class="token string" >'none'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >const</span> <span class="token punctuation" >{</span> x<span class="token punctuation" >,</span> y <span class="token punctuation" >}</span> <span class="token operator" >=</span> currentOffset<span class="token punctuation" >;</span>
  <span class="token keyword" >const</span> transform <span class="token operator" >=</span> `<span class="token function" >translate<span class="token punctuation" >(</span></span>$<span class="token punctuation" >{</span>x<span class="token punctuation" >}</span>px<span class="token punctuation" >,</span> $<span class="token punctuation" >{</span>y<span class="token punctuation" >}</span>px<span class="token punctuation" >)</span>`<span class="token punctuation" >;</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
    transform<span class="token punctuation" >:</span> transform<span class="token punctuation" >,</span>
    <span class="token qualifier" >Webkit</span><span class="token qualifier" >Transform</span><span class="token punctuation" >:</span> transform
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>

@<span class="token function" >DragLayer<span class="token punctuation" >(</span></span>monitor <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  item<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >getItem<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  itemType<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >getItemType<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  currentOffset<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >getSourceClientOffset<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  isDragging<span class="token punctuation" >:</span> monitor<span class="token punctuation" >.</span><span class="token function" >isDragging<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >CustomDragLayer</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >static</span> propTypes <span class="token operator" >=</span> <span class="token punctuation" >{</span>
    item<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>object<span class="token punctuation" >,</span>
    itemType<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>string<span class="token punctuation" >,</span>
    currentOffset<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span><span class="token function" >shape<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      x<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>number<span class="token punctuation" >.</span>isRequired<span class="token punctuation" >,</span>
      y<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>number<span class="token punctuation" >.</span>isRequired
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    isDragging<span class="token punctuation" >:</span> <span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>bool<span class="token punctuation" >.</span>isRequired
  <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

  <span class="token function" >renderItem<span class="token punctuation" >(</span></span>type<span class="token punctuation" >,</span> item<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >switch</span> <span class="token punctuation" >(</span>type<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >case</span> <span class="token qualifier" >Item</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>BOX<span class="token punctuation" >:</span>
      <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Box</span><span class="token qualifier" >Drag</span><span class="token qualifier" >Preview</span> title<span class="token operator" >=</span><span class="token punctuation" >{</span>item<span class="token punctuation" >.</span>title<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> <span class="token punctuation" >{</span> item<span class="token punctuation" >,</span> itemType<span class="token punctuation" >,</span> isDragging <span class="token punctuation" >}</span> <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>
    <span class="token block-keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>isDragging<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token primitive" >null</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div style<span class="token operator" >=</span><span class="token punctuation" >{</span>layerStyles<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div style<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token function" >getItemStyles<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >></span>
          <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >renderItem<span class="token punctuation" >(</span></span>itemType<span class="token punctuation" >,</span> item<span class="token punctuation" >)</span><span class="token punctuation" >}</span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span></code></div></div></div></div><div style="width:100%;" data-reactid="112">
</div></div></div></div></div><script data-reactid="113">window.INITIAL_PROPS = {"location":"docs-drag-layer.html","devMode":false,"files":{"main.css":"main-0dd4237c1570a3f41afd.css","main.js":"main-0dd4237c1570a3f41afd.js"}};
</script><script src="main-0dd4237c1570a3f41afd.js" data-reactid="114"></script></body></html>